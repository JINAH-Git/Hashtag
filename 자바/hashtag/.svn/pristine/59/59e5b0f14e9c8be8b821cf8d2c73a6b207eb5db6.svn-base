<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="hashtag.dto.*" %>
<%@ page import="hashtag.vo.*" %>
<%@ page import="java.util.*" %> 
<%
request.setCharacterEncoding("UTF-8");

String region = request.getParameter("region");
String hashtag = request.getParameter("hashtag");
if(region == null || hashtag == null)
{
	response.sendRedirect("index.html");
	return;
}	

String[] regiontag = {"#전주카페","#완주카페","#군산카페","#익산카페"};
List<String> newList = new ArrayList<>(Arrays.asList(regiontag));
for(int i = 0; i < newList.size(); i++)
{
	if(region.equals(newList.get(i)))
	{
		newList.remove(i);
	}
}
%>
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>분석 결과1</title>
		<link rel="stylesheet" type="text/css" href="/hashtag/style/main1.css" />
		<!--  head 로고 -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap" rel="stylesheet">
		<!-- 포스트 수 카운드 글씨 -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@600&display=swap" rel="stylesheet">
		<!-- 메인 글씨들(인기 포스트, 1년간 해시태그 언급량 추이, 해시트리 태그 등 -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
		<!-- 실시간 인기 해시태그 리스트 글씨들, 다른 지역 카페 리스트 글씨들 -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@700&display=swap" rel="stylesheet">
		<!-- 인기 포스트 블로그 글들 -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@300&display=swap" rel="stylesheet">
		<!-- 인기 포스트 블로그 제목들 -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&display=swap" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
		<script>
			var x = [];
			var y = [];
		</script>
	</head>
	<body>
	<!-- 전체 메인 시작 -->
	<div class="main">
		<!-- head 부분 시작 -->
		<div class="head" style="margin:0px;width:1500px;height:81px;">
			<p style="position:absolute;left:850px;text-align:center;font-size:45px;margin:0px;"><b><a href="index.html" style="text-decoration-line:none;color:black;font-family: 'Roboto Slab', serif;">Cafe HashTags</a></b></p>
		</div>	
		<!-- head 부분 끝 -->
		<!-- head 밑 전체 틀 시작 -->
		<div class="wrap_body">
			<!-- 왼쪽 기둥 시작 -->
			<div class="bodybar1">
				<!-- 첫 번째 해시태그 이름, 포스트 수 시작 -->
				<%
				DataDTO dto = new DataDTO();
				int totalPost = dto.GetTotalPost(region, hashtag);
				%>
				<div class="bar1">
					<span class="hstitle" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b><%= region %></b></span>
					<img class="blog" src="/hashtag/img/blog.png" width="40" height="40">
					<span class="hspostcount" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b><%= totalPost %></b></span>
					<span class="hspost" style="font-family: 'IBM Plex Sans KR', sans-serif;">포스트 수</span>
				</div>
				<!-- 첫 번째 해시태그 이름, 포스트 수 끝 -->
				<!-- 두 번째 실시간 인기 해시태그 전체 틀 시작 -->
				<div class="bar2">
					<span class="phs" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>실시간 인기 해시태그</b></span>
					<div class="phs_list">
						<span class="phs_list1" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>1</b></span>
						<span class="phs_name1" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#오리온</b></span>
						<br>
						<span class="phs_list2" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>2</b></span>
						<span class="phs_name2" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#한옥카페</b></span>
						<br>
						<span class="phs_list3" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>3</b></span>
						<span class="phs_name3" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#대형카페</b></span>
						<br>
						<span class="phs_list4" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>4</b></span>
						<span class="phs_name4" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#감성</b></span>
						<br>
						<span class="phs_list5" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>5</b></span>
						<span class="phs_name5" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#휴가</b></span>
					</div>
				</div>
				<!-- 두 번째 실시간 인기 해시태그 전체 틀 끝 -->
				
				<!-- 세 번째 다른 지역 카페 전체 틀 시작 -->
				<div class="bar3">
					<span class="cafename" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>다른 지역 카페</b></span>
					<!-- 다른 지역 카페 해시태그 시작 -->
					<div class="cafename_list">
						<span class="cafe1" style="font-family: 'IBM Plex Sans KR', sans-serif;">
							<b><a href="main1.jsp?region=<%= newList.get(0).replace("#","%23") %>&hashtag=<%= newList.get(0).replace("#","%23") %>" style="text-decoration: none;"><%= newList.get(0) %></a></b>
						</span>
						<br>
						<span class="cafe2" style="font-family: 'IBM Plex Sans KR', sans-serif;">
							<b><a href="main1.jsp?region=<%= newList.get(1).replace("#","%23") %>&hashtag=<%= newList.get(1).replace("#","%23") %>" style="text-decoration: none;"><%= newList.get(1) %></a></b>
						</span>
						<br>
						<span class="cafe3" style="font-family: 'IBM Plex Sans KR', sans-serif;">
							<b><a href="main1.jsp?region=<%= newList.get(2).replace("#","%23") %>&hashtag=<%= newList.get(2).replace("#","%23") %>" style="text-decoration: none;"><%= newList.get(2) %></a></b>
						</span>
					</div>
					<!-- 다른 지역 카페 해시태그 끝 -->
				</div>
				<!-- 세 번째 다른 지역 카페 전체 틀 끝 -->
			</div>
			<!-- 왼쪽 기둥 끝 -->
			<!-- 왼쪽 두 번째 기둥 시작 -->
			<div class="tag">
				<!-- 연근 태그 시작 -->
				<span class="tagname" style="font-family: 'Noto Sans KR', sans-serif;"><b>연관 태그</b></span>
				<div class="tag_body">
					<span class="tag_name1" style="font-family: 'IBM Plex Sans KR', sans-serif;">
						<a href="main2.jsp?region=<%= region.replace("#","%23") %>&hashtag=%23한옥마을" style="text-decoration-line: none;"><b>#한옥마을</b></a>
					</span><br>
					<span class="tag_name2" style="font-family: 'IBM Plex Sans KR', sans-serif;">
						<a href="main2.jsp?region=<%= region.replace("#","%23") %>&hashtag=%23이색데이트" style="text-decoration-line: none;"><b>#이색데이트</b></a>
					</span><br>
					<span class="tag_name3" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#대형카페</b></span><br>
					<span class="tag_name4" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#디저트카페</b></span><br>
					<span class="tag_name5" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#전주객리단길</b></span><br>
					<span class="tag_name6" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#데이트코스</b></span><br>
					<span class="tag_name7" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#전주신상카페</b></span><br>
					<span class="tag_name8" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#전주카페추천</b></span><br>
					<span class="tag_name9" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#애견동반카페</b></span><br>
					<span class="tag_name10" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#내돈내산</b></span><br>
					<span class="tag_name11" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#카페투어</b></span><br>
					<span class="tag_name12" style="font-family: 'IBM Plex Sans KR', sans-serif;"><b>#전주핫플</b></span><br>
				</div>
				<!-- 연관 태그 끝 -->
			<!-- 2년간 해시태그 언급량 추이 시작 -->
			<%
			DataDTO dto2 = new DataDTO();
			ArrayList<RefinehashtagVO> list = dto2.GetMention(region,hashtag); 
			for(RefinehashtagVO vo : list)
			{
				%>
				<script>
					x.push('<%= vo.getYearmonth() %>');
					y.push('<%= vo.getMetionamount() %>');
				</script>
				<%
			}
			%>
			<div class="graph">
				<span class="graphname" style="font-family: 'Noto Sans KR', sans-serif;"><b>2년간 <span style="color: red;"><%= hashtag %></span> 언급량 추이</b></span>
				<div class="graph_body"></div>
			</div>
			<!-- 2년간 해시태그 언급량 추이 끝 -->
			<!-- 해시태그 트리 시작 -->
			<div class="hstree">
				<span class="hstreename" style="font-family: 'Noto Sans KR', sans-serif;"><b>해시태그 트리</b></span>
				<div class="hstree_tree">
					<img src="/hashtag/img/hashtagtree.jpg" alt="" width="1000" height="500">
				</div>
			</div>
			<!-- 해시태그 트리 끝 -->
			<!-- 긍·부정 단어 순위 변화 시작-->
			<div class="ponword">
				<span class="ponwordname" style="font-family: 'Noto Sans KR', sans-serif;"><b>긍·부정 단어 순위 변화</b></span>
				<!-- 표 시작 -->
				<div class="ponword_body">
					<!-- 긍·부정 단어 순위 제목들 시작 -->
					<div class="ponwordtitle">
						<span class="ponword_t1"><b>순위</b></span>
						<span class="ponword_t2"><b>단어</b></span>
						<span class="ponword_t3"><b>긍·부정</b></span>
						<span class="ponword_t4"><b>건수</b></span>
					</div>
					<!-- 긍·부정 단어 순위 제목들 끝 -->
					<!-- 왼쪽, 오른쪽 방향 버튼 시작 -->
					<span class="left">
						<img src="/hashtag/img/left.png" width="35" height="35">
					</span>
					<span class="right">
						<img src="/hashtag/img/right.png" width="35" height="35">
					</span>
					<!-- 왼쪽, 오른쪽 방향 버튼 끝 -->
					<!-- 긍·부정 단어 순위 내용 시작 -->
					<div class="ponwordnote">
						<div class="ponwordfrm1">
							<span class="ponwordfrm1_1">1</span>
							<span class="ponwordfrm1_2">좋다</span>
							<span class="ponwordfrm1_3">긍정</span>
							<span class="ponwordfrm1_4">78</span>
						</div>
						<div class="ponwordfrm2">
							<span class="ponwordfrm2_1">2</span>
							<span class="ponwordfrm2_2">예쁘다</span>
							<span class="ponwordfrm2_3">긍정</span>
							<span class="ponwordfrm2_4">37</span>
						</div>
						<div class="ponwordfrm3">
							<span class="ponwordfrm3_1">3</span>
							<span class="ponwordfrm3_2">즐기다</span>
							<span class="ponwordfrm3_3">긍정</span>
							<span class="ponwordfrm3_4">34</span>
						</div>
						<div class="ponwordfrm4">
							<span class="ponwordfrm4_1">4</span>
							<span class="ponwordfrm4_2">맛있다</span>
							<span class="ponwordfrm4_3">긍정</span>
							<span class="ponwordfrm4_4">28</span>
						</div>
						<div class="ponwordfrm5">
							<span class="ponwordfrm5_1">5</span>
							<span class="ponwordfrm5_2">덥다</span>
							<span class="ponwordfrm5_3">부정</span>
							<span class="ponwordfrm5_4">19</span>
						</div>
						<div class="ponwordfrm6">
							<span class="ponwordfrm6_1">6</span>
							<span class="ponwordfrm6_2">잘어울리다</span>
							<span class="ponwordfrm6_3">긍정</span>
							<span class="ponwordfrm6_4">18</span>
						</div>
						<div class="ponwordfrm7">
							<span class="ponwordfrm7_1">7</span>
							<span class="ponwordfrm7_2">좋아하다</span>
							<span class="ponwordfrm7_3">긍정</span>
							<span class="ponwordfrm7_4">17</span>
						</div>
						<div class="ponwordfrm8">
							<span class="ponwordfrm8_1">8</span>
							<span class="ponwordfrm8_2">이쁘다</span>
							<span class="ponwordfrm8_3">긍정</span>
							<span class="ponwordfrm8_4">17</span>
						</div>
						<div class="ponwordfrm9">
							<span class="ponwordfrm9_1">9</span>
							<span class="ponwordfrm9_2">신상</span>
							<span class="ponwordfrm9_3">긍정</span>
							<span class="ponwordfrm9_4">11</span>
						</div>
						<div class="ponwordfrm10">
							<span class="ponwordfrm10_1">10</span>
							<span class="ponwordfrm10_2">달지않다</span>
							<span class="ponwordfrm10_3">중립</span>
							<span class="ponwordfrm10_4">11</span>
						</div>
					</div>
					<!-- 긍·부정 단어 순위 내용 끝 -->
				</div>
			</div>
			<!-- 긍·부정 단어 순위 변화 끝-->
			</div>	
			<!-- 왼쪽 두 번째 기둥 끝 -->
		</div>
		<!-- head 밑 전체 틀 끝 -->
	</div>
	<!-- 전체 메인 끝 -->
	</body>
	<script src="js/trend.js"></script>
</html>